import{j as e,u as v,a as w,r as f}from"./index-DXQT00w1.js";const o=({message:d})=>d?e.jsx("p",{className:"text-sm text-red-500 mt-1",children:d}):null,C=d=>d.charAt(0).toUpperCase()+d.slice(1),h=(d,u,a)=>{const s={},x=typeof a=="string"?[a]:Object.keys(u);for(const t of x){const n=d[t]??"",l=u[t];if(!l)continue;const r=C(t);if(l.required&&!n.trim()){s[t]=l.message||`${r} is required`;continue}if(l.pattern&&!l.pattern.test(n)){s[t]=l.patternMessage||`${r} format is invalid`;continue}l.min&&n.length<l.min&&(s[t]=`${r} must be at least ${l.min} characters`)}return s},k=d=>`w-full px-3 py-2 border rounded focus:outline-none ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,z=()=>{const d=v(),{login:u,user:a}=w(),[s,x]=f.useState({id:"",firstName:"",lastName:"",email:"",mobile:"",address:"",state:"",zipcode:"",city:"",country:"",avatar_url:"",bio:""});f.useEffect(()=>{a&&x({id:a.id,firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",mobile:a.mobile||"",address:a.address||"",state:a.state||"",zipcode:a.zipcode||"",city:a.city||"",country:a.country||"",avatar_url:a.avatar_url||"",bio:a.bio||""})},[a]);const[t,n]=f.useState({}),l={firstName:{required:!0},lastName:{required:!0},email:{required:!1,patternMessage:"Enter a valid email"},address:{required:!0},city:{required:!0},state:{required:!0},zipcode:{required:!0}},r=c=>{const{name:i,value:m,files:g}=c.target,N={...s,[i]:m};x(p=>({...p,[i]:g?g[0]:m}));let b=h(N,l,i);b=b[i]?b:{[i]:""},n(p=>({...p,...b}))},y=c=>{c.preventDefault();const i=h(s,l);if(Object.keys(i).length>0){n(i);return}n({}),Object.keys(i).length>0?n(i):(console.log("Updated Profile Data:",s),j(s))},j=async c=>{const m=await(await fetch("https://vgok.onrender.com/api/profile/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).json();m.data.id&&(console.log("profile updated"),u({...a,...m==null?void 0:m.data}),d("/forum"))};return e.jsx("div",{className:"flex flex-col w-full",children:e.jsxs("main",{className:"flex-1 bg-white rounded-xl shadow  ",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2 border-b border-gray-300 p-3",children:"Profile Setting"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-5 pt-2",onSubmit:y,children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["First Name",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:`w-full border border-gray-300 rounded px-3 py-2 ${k(t.firstName)}`,name:"firstName",value:s.firstName,onChange:r}),e.jsx(o,{message:t.firstName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Last Name",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",name:"lastName",value:s.lastName,onChange:r}),e.jsx(o,{message:t.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"E-mail Address"}),e.jsx("input",{type:"email",disabled:!0,className:"w-full border border-gray-300 rounded px-3 py-2 bg-gray-100",name:"email",value:s.email,onChange:r}),e.jsx(o,{message:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mobile Number"}),e.jsx("input",{type:"text",disabled:!0,className:"w-full border border-gray-300 rounded px-3 py-2 bg-gray-100",name:"mobile",value:s.mobile,onChange:r}),e.jsx(o,{message:t.mobile})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Address",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",name:"address",value:s.address,onChange:r}),e.jsx(o,{message:t.address})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["State",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",name:"state",value:s.state,onChange:r}),e.jsx(o,{message:t.state})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Zip Code",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",name:"zipcode",value:s.zipcode,onChange:r}),e.jsx(o,{message:t.zipcode})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["City",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",name:"city",value:s.city,onChange:r}),e.jsx(o,{message:t.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Country"}),e.jsx("input",{type:"text",disabled:!0,className:"w-full border border-gray-300 rounded px-3 py-2 bg-gray-100",name:"country",value:s.country,onChange:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image"}),e.jsx("input",{type:"file",className:"w-full border border-gray-300 rounded px-3 py-2",name:"avatar_url",onChange:r})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"About Yourself"}),e.jsx("textarea",{rows:5,className:"w-full border border-gray-300 rounded px-3 py-2",name:"bio",value:s.bio,onChange:r})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("button",{type:"submit",className:"w-full bg-[#4269c2] hover:bg-[#3256a3] text-white py-3 rounded font-semibold cursor-pointer",children:"Update Profile"})})]})]})})};export{z as default};
