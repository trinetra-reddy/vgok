import{r,j as c,d as x,t as i,e as b}from"./index-DGg-eoZa.js";import{b as P}from"./button-EXXSqmvd.js";import{u as w,C as E,T as U}from"./TopicTable-CGTb6iO4.js";import{g as k}from"./useUserToken-Di5FAHIw.js";import{a as R}from"./useCategories-DuaKfmJf.js";const u=10,B=()=>{const[n,C]=r.useState("All"),[p,T]=r.useState(1),[g,y]=r.useState(""),t=k(),{data:a,isLoading:S,refetch:s}=w(n!=="All"?n:void 0,u,(p-1)*u),{categories:h,isLoading:m}=R({token:t,limit:100,offset:0}),l=r.useMemo(()=>Array.isArray(a==null?void 0:a.data)?a.data:[],[a]),A=r.useMemo(()=>{const e=g.toLowerCase();return l.filter(o=>{var d,f;return((d=o.title)==null?void 0:d.toLowerCase().includes(e))||((f=o.content)==null?void 0:f.toLowerCase().includes(e))})},[l,g]),L=e=>{y(e)},j=async e=>{if(t)try{await b(e,t),i.success("Topic created successfully."),s()}catch{i.error("Failed to create topic.")}},v=async(e,o)=>{if(t)try{await x(e,o,t),i.success("Topic updated successfully."),s()}catch{i.error("Failed to update topic.")}};return c.jsxs("div",{className:"space-y-6",children:[c.jsx(P,{title:"All Topics",searchPlaceholder:"Search by topic",onSearch:L,statusValue:n,onStatusChange:C,onStatusClick:()=>s(),statusOptions:[{label:"All",value:""},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Rejected",value:"rejected"}],createButton:c.jsx(E,{categories:h,isCategoryLoading:m,onCreateOrUpdate:()=>s(),type:"add",onCreate:j,onUpdate:v})}),c.jsx(U,{data:A,loading:S,categories:h,isCategoryLoading:m,onRefresh:()=>s(),page:p,pageSize:u,totalCount:l.length,onPageChange:e=>T(e)})]})};export{B as default};
