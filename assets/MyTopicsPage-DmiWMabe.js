import{r as o,u as b,j as n}from"./index-DGg-eoZa.js";import{b as y}from"./button-EXXSqmvd.js";import{u as P,a as M,C as w,T as E}from"./TopicTable-CGTb6iO4.js";import{a as L}from"./useCategories-DuaKfmJf.js";import"./useUserToken-Di5FAHIw.js";const l=10,q=()=>{const[p,T]=o.useState(""),[r,S]=o.useState("All"),[u,f]=o.useState(1),{user:c}=b(),{data:a,isLoading:A,refetch:t}=P(r!=="All"?r:void 0,l,(u-1)*l),{createTopic:d,updateTopic:h,deleteTopic:j}=M(),{categories:m}=L({token:c==null?void 0:c.token}),i=o.useMemo(()=>Array.isArray(a==null?void 0:a.data)?a.data:[],[a]),v=o.useMemo(()=>{const e=p.toLowerCase();return i.filter(s=>{var g,C;return((g=s.title)==null?void 0:g.toLowerCase().includes(e))||((C=s.content)==null?void 0:C.toLowerCase().includes(e))})},[i,p]),x=[{label:"All",value:""},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Rejected",value:"rejected"}];return n.jsxs("div",{className:"space-y-6",children:[n.jsx(y,{title:"My Topics",searchPlaceholder:"Search by topic",onSearch:T,statusValue:r,onStatusChange:S,onStatusClick:()=>t(),statusOptions:x,createButton:n.jsx(w,{type:"add",categories:m,onCreateOrUpdate:()=>t(),onCreate:d,onUpdate:(e,s)=>h({id:e,data:s})})}),n.jsx(E,{data:v,loading:A,onRefresh:()=>t(),page:u,pageSize:l,totalCount:i.length,onPageChange:f,onDelete:e=>j(e).then(t),onUpdate:e=>h(e).then(t),onCreate:e=>d(e).then(t),categories:m,showActions:!0})]})};export{q as default};
